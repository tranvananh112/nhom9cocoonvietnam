<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Thanh to√°n - Cocoon">
    <title>Thanh To√°n - Cocoon</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="header-container">
            <a href="index.html" class="logo">
                <span>üåø</span>
                <div class="logo-text">
                    <strong>The Cocoon</strong>
                    <small>ORIGINAL VIETNAM</small>
                </div>
            </a>
            <nav>
                <a href="index.html">Trang Ch·ªß</a>
                <a href="products.html">S·∫£n Ph·∫©m</a>
                <a href="about.html">V·ªÅ Ch√∫ng T√¥i</a>
                <div class="nav-icons">
                    <button class="icon-btn" data-page="cart">üõí<span class="cart-count" style="display: none;">0</span></button>
                    <button class="icon-btn" data-page="admin" title="Admin">üîí</button>
                </div>
            </nav>
        </div>
    </header>

    <div class="container">
        <section style="margin-top: 40px; margin-bottom: 60px;">
            <h2>Thanh To√°n</h2>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 40px;">
                <!-- Left: Order Form -->
                <div>
                    <h3 style="margin-bottom: 30px; color: #8B6F47;">Th√¥ng Tin Giao H√†ng</h3>
                    <form id="orderForm" style="display: flex; flex-direction: column; gap: 20px;">
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">H·ªç v√† T√™n *</label>
                            <input type="text" id="customerName" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 1em;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">S·ªë ƒêi·ªán Tho·∫°i *</label>
                            <input type="tel" id="customerPhone" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 1em;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">ƒê·ªãa Ch·ªâ Giao H√†ng *</label>
                            <input type="text" id="customerAddress" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 1em;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Email</label>
                            <input type="email" id="customerEmail" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 1em;">
                        </div>

                        <h3 style="margin-top: 30px; margin-bottom: 20px; color: #8B6F47;">Ph∆∞∆°ng Th·ª©c Thanh To√°n</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 15px; border: 2px solid #ddd; border-radius: 5px; transition: all 0.3s;">
                                <input type="radio" name="paymentMethod" value="cod" checked onclick="updatePaymentDisplay()">
                                <span>
                                    <strong>Thanh To√°n Khi Nh·∫≠n H√†ng (COD)</strong>
                                    <br>
                                    <small style="color: #666;">B·∫°n s·∫Ω thanh to√°n khi nh·∫≠n h√†ng</small>
                                </span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 15px; border: 2px solid #ddd; border-radius: 5px; transition: all 0.3s;">
                                <input type="radio" name="paymentMethod" value="momo" onclick="updatePaymentDisplay()">
                                <span>
                                    <strong>Thanh To√°n Qua Momo (QR Code)</strong>
                                    <br>
                                    <small style="color: #666;">Qu√©t m√£ QR b·∫±ng ·ª©ng d·ª•ng Momo</small>
                                </span>
                            </label>
                        </div>

                        <button type="submit" class="btn" style="margin-top: 20px;">ƒê·∫∑t H√†ng</button>
                    </form>
                </div>

                <!-- Right: Order Summary -->
                <div>
                    <h3 style="margin-bottom: 30px; color: #8B6F47;">T√≥m T·∫Øt ƒê∆°n H√†ng</h3>
                    <div id="orderSummary" style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;"></div>
                    
                    <div id="paymentInfo" style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin-bottom: 20px;"></div>
                </div>
            </div>
        </section>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>V·ªÅ Cocoon</h3>
                <ul>
                    <li><a href="about.html">Gi·ªõi thi·ªáu th∆∞∆°ng hi·ªáu</a></li>
                    <li><a href="#">Gi√° tr·ªã Cocoon</a></li>
                    <li><a href="#">L·ªãch s·ª≠ ph√°t tri·ªÉn</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>H·ªó Tr·ª£</h3>
                <ul>
                    <li><a href="#">Li√™n h·ªá ch√∫ng t√¥i</a></li>
                    <li><a href="#">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</a></li>
                    <li><a href="#">Ch√≠nh s√°ch giao h√†ng</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Theo D√µi</h3>
                <ul>
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">TikTok</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Li√™n H·ªá</h3>
                <ul>
                    <li>Email: info@cocoon.vn</li>
                    <li>Hotline: 1900-xxxx</li>
                    <li>H√† N·ªôi, Vi·ªát Nam</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Cocoon - M·ªπ ph·∫©m Thu·∫ßn Chay. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
        </div>
    </footer>

    <script src="js/app.js"></script>
    <script>
        function renderOrderSummary() {
            const summary = document.getElementById('orderSummary');
            let html = '';
            cart.items.forEach(item => {
                html += `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee;">
                        <div>
                            <div style="font-weight: 500;">${item.name}</div>
                            <small style="color: #666;">x${item.quantity}</small>
                        </div>
                        <div style="font-weight: 500;">${new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(item.price * item.quantity)}</div>
                    </div>
                `;
            });
            html += `
                <div style="font-size: 1.2em; font-weight: bold; color: #D4AF37; padding-top: 15px; border-top: 2px solid #ddd;">
                    T·ªïng c·ªông: ${new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(cart.getTotal())}
                </div>
            `;
            summary.innerHTML = html;
        }

        function updatePaymentDisplay() {
            const method = document.querySelector('input[name="paymentMethod"]:checked').value;
            const paymentInfo = document.getElementById('paymentInfo');
            
            if (method === 'momo') {
                paymentInfo.innerHTML = `
                    <div style="text-align: center;">
                        <p style="margin-bottom: 15px; color: #666;">Qu√©t m√£ QR d∆∞·ªõi ƒë√¢y b·∫±ng ·ª©ng d·ª•ng Momo ƒë·ªÉ thanh to√°n:</p>
                        <div style="background: white; padding: 20px; border-radius: 10px; display: inline-block;">
                            <img src="https://api.vietqr.io/image/970422-0342645707-QuUifyf.jpg?accountName=TRAN%20VAN%20ANH&amount=${cart.getTotal()}&addInfo=Cocoon%20Group%209" alt="QR Code" style="width: 200px; height: 200px; border-radius: 5px;">
                        </div>
                        <p style="margin-top: 15px; color: #666; font-size: 0.9em;">S·ªë ti·ªÅn: ${new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(cart.getTotal())}</p>
                    </div>
                `;
            } else {
                paymentInfo.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <p style="color: #666;">B·∫°n s·∫Ω thanh to√°n tr·ª±c ti·∫øp khi nh·∫≠n h√†ng</p>
                    </div>
                `;
            }
        }

        document.getElementById('orderForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            if (cart.items.length === 0) {
                alert('Gi·ªè h√†ng tr·ªëng. Vui l√≤ng th√™m s·∫£n ph·∫©m.');
                return;
            }

            const order = {
                id: 'ORD' + Date.now(),
                customer: {
                    name: document.getElementById('customerName').value,
                    phone: document.getElementById('customerPhone').value,
                    address: document.getElementById('customerAddress').value,
                    email: document.getElementById('customerEmail').value,
                },
                items: [...cart.items],
                total: cart.getTotal(),
                paymentMethod: document.querySelector('input[name="paymentMethod"]:checked').value,
                status: 'pending',
                createdAt: new Date().toISOString(),
            };

            // Save to localStorage
            let orders = JSON.parse(localStorage.getItem('cocoon_orders') || '[]');
            orders.push(order);
            localStorage.setItem('cocoon_orders', JSON.stringify(orders));

            // Clear cart
            cart.clear();

            // Show success message
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                padding: 40px 60px;
                border-radius: 10px;
                text-align: center;
                z-index: 10000;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            `;
            notification.innerHTML = `
                <div style="font-size: 3em; margin-bottom: 20px;">‚úì</div>
                <h2 style="color: #4CAF50; margin-bottom: 10px;">ƒê·∫∑t h√†ng th√†nh c√¥ng!</h2>
                <p style="color: #666; margin-bottom: 20px;">M√£ ƒë∆°n h√†ng: <strong>${order.id}</strong></p>
                <a href="order-tracking.html" class="btn" style="display: inline-block;">Theo d√µi ƒë∆°n h√†ng</a>
            `;
            document.body.appendChild(notification);

            setTimeout(() => {
                window.location.href = 'order-tracking.html';
            }, 3000);
        });

        renderOrderSummary();
        updatePaymentDisplay();
        cart.updateCartCount();
    </script>
</body>
</html>
